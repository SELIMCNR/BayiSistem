<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>İnternet Hız Testi | Bağlan360</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <style>
      body {
        background-color: #f0f2f5;
      }
      .test-container {
        max-width: 800px;
        margin: auto;
      }
      .test-card {
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        padding: 30px;
        background-color: #ffffff;
      }
      .speed-gauge {
        font-size: 2.5rem;
        font-weight: bold;
        color: #0d6efd; /* Mavi */
      }
      .start-button {
        transition: all 0.3s ease;
        padding: 15px 40px;
        font-size: 1.5rem;
        border-radius: 50px;
      }
      .start-button:hover {
        transform: translateY(-2px);
      }
      /* Başlıklar için tutarlı stil */
      .page-header {
        color: #0d6efd; /* Ana mavi renk */
        font-weight: 700;
        padding-bottom: 15px;
        border-bottom: 3px solid #0d6efd;
        margin-bottom: 40px;
      }
      .tariff-header {
        color: #343a40;
        font-weight: 600;
        margin-top: 40px;
        margin-bottom: 25px;
      }
    </style>
  </head>
  <body>
    {% include 'navbar.html' %}
    <div class="container my-5 test-container">
      <h1 class="page-header text-center mb-4">
        <i class="bi bi-speedometer2 me-2"></i> İnternet Hız Testi
      </h1>
      <p class="lead text-center text-secondary mb-5">
        İnternet bağlantınızın **indirme**, **yükleme** hızını ve gecikme
        süresini (**ping**) tek tıkla ölçün.
      </p>

      <div class="card test-card text-center">
        <div class="card-body">
          <div class="row mb-4">
            <div class="col-4">
              <div class="text-muted small mb-2 fw-bold">PING</div>
              <div class="speed-gauge text-primary" id="pingResult">--</div>
              <div class="text-muted">ms</div>
            </div>
            <div class="col-4 border-start border-end">
              <div class="text-muted small mb-2 fw-bold">İNDİRME</div>
              <div class="speed-gauge text-success" id="downloadResult">--</div>
              <div class="text-muted">Mbps</div>
            </div>
            <div class="col-4">
              <div class="text-muted small mb-2 fw-bold">YÜKLEME</div>
              <div class="speed-gauge text-danger" id="uploadResult">--</div>
              <div class="text-muted">Mbps</div>
            </div>
          </div>

          <hr />

          <button
            class="btn btn-primary start-button mt-4 shadow"
            id="startTestButton"
          >
            TESTİ BAŞLAT
          </button>

          <div id="testStatus" class="mt-4 text-info fw-bold"></div>
        </div>
      </div>

      <div class="mt-5 p-4 bg-light rounded shadow-sm">
        <h5 class="text-dark tariff-header mt-0">
          <i class="bi bi-question-circle-fill me-2 text-primary"></i> Hız Testi
          Sonuçları Ne Anlama Geliyor?
        </h5>
        <ul class="list-group list-group-flush mt-3">
          <li class="list-group-item bg-light">
            <i class="bi bi-arrow-right-short fs-4 text-primary me-2"></i>
            <strong class="text-primary">Ping (ms):</strong> Gecikme süresini
            ifade eder. Düşük değerler (&lt;50ms) online oyun ve canlı yayınlar
            için idealdir.
          </li>
          <li class="list-group-item bg-light">
            <i class="bi bi-arrow-right-short fs-4 text-success me-2"></i>
            <strong class="text-success">İndirme (Mbps):</strong> Veri alma
            hızınızdır. Video izleme, dosya indirme ve web gezintisi için
            önemlidir.
          </li>
          <li class="list-group-item bg-light">
            <i class="bi bi-arrow-right-short fs-4 text-danger me-2"></i>
            <strong class="text-danger">Yükleme (Mbps):</strong> Veri gönderme
            hızınızdır. Görüntülü konuşma ve dosya yükleme için kritiktir.
          </li>
        </ul>
      </div>

      <div
        class="alert alert-warning mt-4 text-center d-flex align-items-center justify-content-center"
        role="alert"
      >
        <i class="bi bi-lightbulb-fill me-2 fs-5"></i>
        Hızınız beklediğinizden düşük mü? Daha hızlı paketleri
        <a href="/basvuru" class="alert-link fw-bold ms-1"
          >Başvuru sayfamızdan</a
        >
        karşılaştırabilirsiniz!
      </div>
    </div>
    {% include 'footer.html' %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Test simülasyonu için JavaScript kodu
      document
        .getElementById("startTestButton")
        .addEventListener("click", startTest);

      const statusElement = document.getElementById("testStatus");
      const buttonElement = document.getElementById("startTestButton");

      // Sonuçların gösterileceği elemanlar
      const pingEl = document.getElementById("pingResult");
      const downloadEl = document.getElementById("downloadResult");
      const uploadEl = document.getElementById("uploadResult");

      function resetResults() {
        pingEl.textContent = "--";
        downloadEl.textContent = "--";
        uploadEl.textContent = "--";
        statusElement.textContent = "";
      }

      function startTest() {
        resetResults();
        buttonElement.disabled = true;
        buttonElement.textContent = "TEST EDİLİYOR...";

        // 1. Ping Testi (Simülasyon)
        setTimeout(() => {
          statusElement.textContent = "Ping ölçülüyor...";
          // Rastgele bir değer atamadan önce sonucu göstermeye başla
          const pingVal = Math.floor(Math.random() * (120 - 20 + 1)) + 20; // 20-120ms arası
          pingEl.textContent = pingVal;
        }, 1000);

        // 2. İndirme Testi (Simülasyon)
        setTimeout(() => {
          statusElement.textContent = "İndirme hızı ölçülüyor...";
          const downloadVal = (Math.random() * (80 - 15) + 15).toFixed(1); // 15-80 Mbps arası
          downloadEl.textContent = downloadVal;
        }, 3000);

        // 3. Yükleme Testi (Simülasyon)
        setTimeout(() => {
          statusElement.textContent = "Yükleme hızı ölçülüyor...";
          const uploadVal = (Math.random() * (15 - 3) + 3).toFixed(1); // 3-15 Mbps arası
          uploadEl.textContent = uploadVal;
        }, 5000);

        // 4. Sonuçlandırma
        setTimeout(() => {
          statusElement.textContent = "✅ Test Tamamlandı!";
          buttonElement.textContent = "YENİDEN BAŞLAT";
          buttonElement.disabled = false;
        }, 6500);
      }
    </script>
  </body>
</html>
